<div class="flex w-full mx-auto">
  <div>
    <div class="flex flex-col items-center justify-start my-5 sm:flex-row">
      <% if @podcast.image_urls.any? %>
        <%= image_tag @podcast.image_urls.second.url %>
      <% else %>
        <%= image_tag "podiscover_medium.png" %>
      <% end %>      
      <% if action_name == "show" %>
        <%= link_to  @podcast.external_url, class: "flex items-center" do %>
          <%= image_tag "spotify_logo.png", class: "ml-5 w-8 h-8" %>
          <span class="ml-2 bg-transparent text-[#1db954] font-semibold">Listen on Spotify</span>
        <% end %>      
      <% end %>
    </div>

    <p class="my-5">
      <strong class="block mb-1 font-medium">Name:</strong>
      <%= @podcast.name %>
    </p>

    <p class="my-5">
      <strong class="block mb-1 font-medium">Publisher:</strong>
      <%= @podcast.publisher %>
    </p>  

    <p class="my-5">
      <strong class="block mb-1 font-medium">Description:</strong>
      <%= @podcast.description %>
    </p>

    <p class="my-5">
      Listening by
      <% @podcast.users.each_with_index do |listener, index| %>
        <%= link_to listener.nickname, listener, class: "text-blue-500" %>
        <% unless @podcast.users.count-1 == index %>
          <%= " and " %>
        <% end %>
      <% end %>
    </p>

    <% if @podcast.categories.any? %>
      <p class="my-5">
        <strong class="block mb-1 font-medium">Categories:</strong>
        <%= @podcast.categories.pluck(:name).join(', ') %>
      </p>
    <% end %>

    <% if @episodes.any? %>
      <h2 class="mt-16 text-xl font-bold">Last <%= @episodes.count %> Episodes</h2>
      <div>
        <% @episodes.each_with_index do |episode, index| %>
          <%= link_to podcast_episode_path(@podcast, episode) do %>
            <p class="my-5">
              <strong class="block mb-1 font-medium">Name:</strong>
              <%= episode.name %>
            </p>
          <% end %>
          
          <p class="my-5">
            <strong class="block mb-1 font-medium">Release Date:</strong>
            <%= episode.release_date %>
          </p>
          
          <% if @episodes.count != index+1 %>
            <hr class="my-5">
          <% end %>
        <% end %>
      </div>
    <% end %>
    
    <%= link_to 'Back to podcasts', subscriptions_path, class: "font-medium" %>
  </div>
</div>
